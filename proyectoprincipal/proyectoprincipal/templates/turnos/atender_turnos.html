{% extends "../template.html" %}

{% block title %}Atención al cliente{% endblock %}

{% block main %}


<div class="container">
	<div class="row">
		<div class="card col-sm-3" style="margin-left: 2rem" >
			  <div class="card-body">
			    <h1 class="card-title" style="text-align: center; font-size: 1.5rem">Ventanilla</h1>
			    <h6 class="card-subtitle mb-2 text-muted" style="text-align: center;">Número de ventanilla</h6>
			    <h1 class="display-1" style="text-align: center;">--</h1>
			    <center><button id="attending" class="btn btn-danger" >Cerrado <i class="fas fa-power-off"></i></button></center>
			  </div>
			</div>


			<div class="card col-sm-8" style="margin-left: 1rem" >
			  <div class="card-header">
			    Turno Actual
			  </div>
			  <div class="card-body">
			    <table class="table table-borderless">
				  <thead>
				    <tr>
				      <th scope="col">Turno</th>
				      <th scope="col">Servicio</th>
				      <th scope="col">Cliente</th>
				      <th scope="col">Identificación</th>
				    </tr>
				  </thead>
				  <tbody>
				    <tr>
				      <th id="turn" scope="row"><h1 class="display-2">C05</h1></th>
				      <td>Sacar Plata</td>
				      <td>Otto Nule</td>
				      <td>1143844395</td>
				    </tr>
				  </tbody>
				</table>
			  </div>
			</div>

			
	</div>
	<div  style="text-align: center; margin-top: 8rem;">
		<div class="btn-group btn-group-lg" role="group" aria-label="Basic example">
		  <button type="button" class="btn btn-secondary" style="font-size: 1.5rem;"><i class="fa fa-bullhorn" style="color: #751AFF"></i>Llamar Nuevamente</button>
		  <button type="button" class="btn btn-secondary" style="font-size: 1.5rem;"><i class="fas fa-play" style="color: #04befe"></i>Iniciar Atención</button>
		  <button type="button" class="btn btn-secondary" style="font-size: 1.5rem;"><i class="fas fa-stop" style="color: #FF0017"></i>Terminar Turno</button>
		</div>
		
	</div>

	<div class="container-fluid" style="margin-top: 5rem;"  >
		<h2 for="next">Siguiente:</h2>
		<div class="container" style="background-color:#dee2e6; padding-left: 0">
			<ul class="list-group list-group-horizontal" id="next_list" style="flex-direction:row; ">
				<li class="list-group-item" style="background-color: transparent;"><span class="btn btn-secondary" id="next" style="font-size: 3rem; color: #FF0017;" ><i class="fas fa-forward"></i></i></span></h1></li>
			  	<li class="list-group-item" style="background-color: transparent;"><span style="font-size: 3rem; color: #FF0017;" >C06</span></h1></li>
			  	<li class="list-group-item" style="background-color: transparent;border: none;"><span style="font-size: 2rem; color: #04befe;">C07</span></li>
			  	<li class="list-group-item" style="background-color: transparent;border: none;"><span style="font-size: 2rem; color: #04befe;">C08</span></li>
			  	<li class="list-group-item" style="background-color: transparent;border: none;"><span style="font-size: 2rem; color: #04befe;">C09</span></li>
			</ul>
			
		</div>
	</div>

</div>
<div class="modal" id="choose_window" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">En qué ventanilla te encuentras?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
        	 <form method="POST" >
        {% csrf_token %}
                <label>Ventaniilas</label>
                {{ form.window}}
            </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary">Atender</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
      </form>
    </div>
  </div>
</div>

{% endblock %}
{% block myjs %}

<script>
$(function(){
	$('#next').on('click',function(){
		$('#turn h1').html($('ul#next_list li:eq(1) span').text());
		$('ul#next_list li:eq(1) span').html($('ul#next_list li:eq(2)').text());
		$('ul#next_list li:eq(2)').remove();
	});
});

function attending(){
	$.ajaxSetup({
	        headers: {
	            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
	        }
	    });
	        
$.ajax({
    type:'GET',
    url:'/getuser',
    data: {'user_id':'user_id'},
    dataType: 'json',
    success: function(data){
      if(data.success == false){
       
      }else if(data.success == true){
      	          	
    	}     
		}  	          
	});

}

$(function(){

	var counter = 0;

	$('#attending').on('click',function(){
		counter++;
		if (counter % 2 == 0) {
			$(this).css('background-color','#FF0017');
			$(this).css('border-color','#FF0017');
			$(this).html('Cerrado <i class="fas fa-power-off"></i>');
		} else {
			$('#choose_window').modal();
			$(this).css('background-color','#28a745');
			$(this).css('border-color','#28a745');
			$(this).html('Atendiendo <i class="fas fa-power-off"></i>');
		}
	
	});

});

$(function(){

	$('select[name=window]').addClass('form-control');
});

</script>


{% endblock %}